<%= form_for @contact, :remote => true do |f| %>
  <ul class='form-navigation'>
    <li><a data-section='summary' class='selected' href='#'>Summary</a></li>
    <li><a data-section='contact' href='#'>Contact Information</a></li>
    <li><a data-section='addresses' href='#'>Addresses</a></li>
  </ul>

  <div class='fields'>
    <fieldset class='section summary'>
      <%= f.label 'Name' %>

      <div class='name'>
        <%= f.text_field :first_name, :placeholder => 'First Name', :class => 'medium' %>
        <%= f.text_field :last_name, :placeholder => 'Last Name', :class => 'medium' %>
      </div>

      <%= f.label :comment, 'Comments' %>
      <%= f.text_area :comment, :rows => 5 %>
    </fieldset>

    <fieldset class='section contact hidden'>
      <div class='email-addresses'>
        <h4>Email Addresses</h4>

        <%= link_to_add_fields 'Add email address', f, :email_addresses %>

        <%= f.fields_for :email_addresses do |builder| %>
          <%= render :partial => 'email_address_fields', :locals => { :f => builder } %>
        <% end %>
      </div>

      <div class='phone-numbers'>
        <h4>Phone Numbers</h4>

        <%= link_to_add_fields 'Add phone numbers', f, :phone_numbers %>
        
        <%= f.fields_for :phone_numbers do |builder| %>
          <%= render :partial => 'phone_number_fields', :locals => { :f => builder } %>
        <% end %>
      </div>
    </fieldset>

    <fieldset class='section addresses hidden'>
      <div class='addresses'>
        <h4>Addresses</h4>

        <%= link_to_add_fields 'Add address', f, :addresses %>
        
        <%= f.fields_for :addresses do |builder| %>
          <%= render :partial => 'address_fields', :locals => { :f => builder } %>
        <% end %>
      </div>
    </fieldset>
  </div>

  <ul class='actions'>
    <li><%= link_to 'Cancel', '#', :class => 'cancel' %></li>
    <li><%= f.submit 'Save' %></li>

    <% if params[:action] == 'edit' %>
      <li><%= link_to 'Delete', { :controller => 'contacts', :action => 'destroy', :id => @contact },
          :class => 'delete', :method => :delete, :remote => true,
          :confirm => 'Are you sure you want to delete this contact?' %></li>
    <% end %>
  </div>
<% end %>
